(function(){"use strict";var e={371:function(e,t,s){var a=s(751),n=s(641),l=s(953),r=s(33),o=s(220);const i={class:"swap swap-rotate"},u=["checked"],m="pastel",c="luxury",g="Monkey memory is_dark";var d={__name:"ThemeController",setup(e){const t=(0,l.KR)("true"===localStorage.getItem(g)),s=()=>{document.documentElement.setAttribute("data-theme",t.value?c:m),localStorage.setItem(g,`${t.value}`)},a=()=>{t.value=!t.value,s()};return(0,n.sV)((()=>{s()})),(e,s)=>((0,n.uX)(),(0,n.CE)("label",i,[(0,n.Lk)("input",{checked:t.value,onChange:a,type:"checkbox"},null,40,u),s[0]||(s[0]=(0,n.Lk)("i",{class:"px-3 swap-off bi bi-sun"},null,-1)),s[1]||(s[1]=(0,n.Lk)("i",{class:"px-3 swap-on bi bi-moon"},null,-1))]))}};const b=d;var v=b,p=s(278);const f=e=>{let t,s,a;for(a=e.length-1;a>0;a--)t=Math.floor(Math.random()*(a+1)),s=e[a],e[a]=e[t],e[t]=s;return e},h=e=>e[Math.floor(Math.random()*e.length)];const k={difficulty:3,fixedDifficulty:!1,gridNumRows:6,gridNumCols:5,numNumbers:3,numGames:0,loosePenaltySec:0,showGifPictures:!1},y="MonkeyMemory-settings",w=()=>{const e=localStorage.getItem(y);let t=e?JSON.parse(e):k;for(const s in k)void 0===t[s]&&(t[s]=k[s]);return t},x=13,C=e=>`img/game-over/win${e}.webp`;let N=f(new Array(x).fill(0).map(((e,t)=>t+1))),L=0;const G=()=>(L>=N.length&&(N=f(new Array(x).fill(0).map(((e,t)=>t+1))),L=0),C(N[L++])),_=(0,p.y$)({strict:!0,state(){return{global:{showHint:!0},settings:w(),game:{currentNumber:1,gameOver:!1,grid:[],winImage:new Image,totalGamesPlayed:0}}},getters:{totalCells(e){return e.settings.gridNumCols*e.settings.gridNumRows}},mutations:{changeSettings(e,t){!t.key in e.settings?console.error(`Settings key ${t.key} not found`):(e.settings[t.key]=t.value,localStorage.setItem(y,JSON.stringify(e.settings)))},setCurrentNumber(e,t){e.game.currentNumber=t,e.global.showHint=!1},setGameOver(e,t){e.game.gameOver=t,t&&e.game.currentNumber>=e.settings.numNumbers&&(e.game.totalGamesPlayed+=1)},setGrid(e,t){e.game.grid=t},updateCell(e,{cellIndex:t,cellData:s}){Object.assign(e.game.grid[t],s)},resetGame(e){e.game.currentNumber=1,e.game.gameOver=!1,e.game.grid=[],e.game.winImage.src=G(),e.game.totalGamesPlayed>=e.settings.numGames&&e.settings.numGames>0&&(e.game.totalGamesPlayed=0)}},actions:{generateGrid({state:e,commit:t,getters:s}){const a=[];for(let r=0;r<s.totalCells;r++)a.push({id:r,hasNumber:!1,number:null,isRevealed:!1,isCorrect:!1,isError:!1});const n=Array.from({length:s.totalCells},((e,t)=>t)),l=f(n).slice(0,e.settings.numNumbers);for(let r=0;r<e.settings.numNumbers;r++){const e=l[r];a[e].hasNumber=!0,a[e].number=r+1,a[e].isRevealed=!0}t("setGrid",a)},handleCellClick({state:e,commit:t},s){if(e.game.gameOver||!s.hasNumber||s.number<e.game.currentNumber||1===e.game.currentNumber&&s.number>1)return;const a=s.id;s.number===e.game.currentNumber?(t("updateCell",{cellIndex:a,cellData:{isRevealed:!0,isCorrect:!0}}),1===e.game.currentNumber&&e.game.grid.forEach(((e,s)=>{1!==e.number&&t("updateCell",{cellIndex:s,cellData:{isRevealed:!1}})})),t("setCurrentNumber",e.game.currentNumber+1),e.game.currentNumber>e.settings.numNumbers&&t("setGameOver",!0)):(t("setGameOver",!0),e.game.grid.forEach(((e,s)=>{e.hasNumber&&t("updateCell",{cellIndex:s,cellData:{isRevealed:!0}})})),t("updateCell",{cellIndex:a,cellData:{isError:!0}}))},resetGame({commit:e,dispatch:t}){e("resetGame"),t("generateGrid")}}}),E={class:"navbar bg-base-100"},R={class:"flex-1"},P={class:"flex-none"};var S={__name:"Navbar",setup(e){const t=(0,o.rd)(),s=(0,o.lq)(),a=(0,n.EW)((()=>"settings"===s.name?"Settings":_.state.global.showHint&&"game"===s.name?"Click '1'":"Monkey Memory")),i=()=>{"settings"===s.name?t.push("/"):t.push("/settings")};return(e,s)=>((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("div",R,[(0,n.Lk)("a",{class:"btn btn-ghost text-xl",onClick:s[0]||(s[0]=e=>(0,l.R1)(t).push("/"))},(0,r.v_)(a.value),1)]),(0,n.Lk)("div",P,[(0,n.Lk)("i",{class:"px-3 bi bi-wrench cursor-pointer",onClick:i}),(0,n.bF)(v)])]))}};const O=S;var I=O,M={__name:"App",setup(e){return(e,t)=>{const s=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(I),(0,n.bF)(s)],64)}}};const X=M;var j=X,D={__name:"Home",setup(e){return(0,n.sV)((()=>{Ke.push("/game")})),(e,t)=>" hi "}};const K=D;var $=K,F=s(197),T=s.n(F);const W={method:"dialog",class:"modal-box"},A={class:"flex justify-between"},Y={class:"text-lg font-bold"},B={class:"ml-2 text-neutral text-sm"},H=["src"],Q={key:0,class:"text-neutral text-sm"},V={key:1},z={key:0,class:"text-neutral text-sm mt-2"},J={key:0,class:"loading loading-bars loading-xs px-2"},q={key:1},U={class:"modal-action"},Z=["disabled"],ee={key:2},te={class:"modal-action"},se=["disabled"],ae=["disabled"];var ne={__name:"GameEndModal",props:{open:Boolean,win:Boolean},emits:["close"],setup(e,{emit:t}){const s=e,o=t,i=(0,l.KR)(""),u=(0,l.KR)(!1),m=(0,n.EW)((()=>_.state.settings.numGames>0&&_.state.game.totalGamesPlayed>=_.state.settings.numGames)),c=(0,l.KR)(null),g=["Congratulations!","You've got it!","Good job!","Well done!","Keep going!","You're doing great!","Great job!","Excellent!","You rock!","Awesome!","Impressive!","Fantastic!","Superb!","Splendid!"],d=(0,l.KR)(""),b=(0,n.EW)((()=>s.win?d:`You've got ${_.state.game.currentNumber-1} correct`)),v=(0,n.EW)((()=>s.win?_.state.settings.numNumbers>=_.getters.totalCells:_.state.settings.numNumbers<=1)),p=()=>{_.dispatch("resetGame"),y()},f=()=>{s.win||_.commit("changeSettings",{key:"numNumbers",value:_.state.settings.numNumbers-1}),p()},k=()=>{s.win&&_.state.settings.numNumbers<_.getters.totalCells&&_.commit("changeSettings",{key:"numNumbers",value:_.state.settings.numNumbers+1}),p()},y=()=>{c.value.close(),o("close")};(0,n.wB)((()=>s.open),(e=>{e?(d.value=h(g),i.value=_.state.game.winImage.src,s.win||0===_.state.settings.loosePenaltySec?u.value=!1:(u.value=!0,setTimeout((()=>{u.value=!1}),1e3*_.state.settings.loosePenaltySec)),c.value.showModal()):c.value.close()}));const w=(0,n.EW)((()=>0===_.state.settings.numGames?"":_.state.game.totalGamesPlayed===_.state.settings.numGames?"No games left":_.state.game.totalGamesPlayed===_.state.settings.numGames-1?"Last game":_.state.settings.numGames-_.state.game.totalGamesPlayed+" games left"));return(e,t)=>((0,n.uX)(),(0,n.CE)("dialog",{ref_key:"modal",ref:c,class:"modal"},[(0,n.Lk)("form",W,[(0,n.Lk)("div",A,[(0,n.Lk)("h3",Y,(0,r.v_)(b.value),1),(0,n.Lk)("span",B,(0,r.v_)(w.value),1)]),(0,n.bo)((0,n.Lk)("img",{src:i.value,class:"w-full my-2 animate__animated animate__fadeIn animate__faster"},null,8,H),[[a.aG,(0,l.R1)(_).state.settings.showGifPictures&&s.win]]),m.value?((0,n.uX)(),(0,n.CE)("div",Q," Reload page to play again. You can disable this in the settings (number of games). ")):((0,n.uX)(),(0,n.CE)("div",V,[0===(0,l.R1)(_).state.settings.loosePenaltySec||s.win?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",z,[(0,n.eW)(" Waiting "+(0,r.v_)((0,l.R1)(_).state.settings.loosePenaltySec)+" seconds to play again. You can disable this in the settings. ",1),u.value?((0,n.uX)(),(0,n.CE)("span",J)):(0,n.Q3)("",!0)])),(0,l.R1)(_).state.settings.fixedDifficulty?((0,n.uX)(),(0,n.CE)("div",q,[(0,n.Lk)("div",U,[(0,n.Lk)("button",{class:"btn btn-primary",onClick:(0,a.D$)(p,["prevent"]),disabled:v.value||u.value,autofocus:""}," Play again ",8,Z)])])):((0,n.uX)(),(0,n.CE)("div",ee,[(0,n.Lk)("div",te,[(0,n.Lk)("button",{class:"btn btn-neutral btn-outline",onClick:(0,a.D$)(f,["prevent"]),disabled:u.value},(0,r.v_)(s.win?`Try ${(0,l.R1)(_).state.settings.numNumbers} again`:"Easier: "+((0,l.R1)(_).state.settings.numNumbers-1)),9,se),(0,n.Lk)("button",{class:"btn btn-primary",onClick:(0,a.D$)(k,["prevent"]),disabled:v.value||u.value,autofocus:""},(0,r.v_)(s.win?`Next: ${(0,l.R1)(_).state.settings.numNumbers+1}`:`Try ${(0,l.R1)(_).state.settings.numNumbers} again`),9,ae)])]))]))])],512))}};const le=ne;var re=le;const oe={class:"flex items-start justify-center"},ie={class:"flex flex-col items-center my-4"},ue=["onTouchstart","onMousedown"],me={key:0};var ce={__name:"Game",setup(e){const t=(0,p.Pj)(),s=(0,l.KR)(0),o=()=>{s.value=Math.floor(.9*Math.min(window.innerWidth/t.state.settings.gridNumCols,(window.innerHeight-40)/t.state.settings.gridNumRows))};(0,n.sV)((()=>{window.addEventListener("resize",o),o(),t.commit("resetGame"),t.dispatch("generateGrid")})),(0,n.hi)((()=>{window.removeEventListener("resize",o),t.dispatch("resetGame")}));const i=(0,l.KR)(!1),u=(0,l.KR)(!1),m=(e,s)=>{!t.state.settings.gameOver&&e.hasNumber&&(t.dispatch("handleCellClick",e),e.number===t.state.settings.numNumbers&&t.state.game.gameOver&&e.number<=t.state.game.currentNumber&&T().confetti(s.target))};(0,n.wB)((()=>t.state.game.gameOver),(e=>{e&&setTimeout((()=>{u.value=t.state.game.currentNumber>t.state.settings.numNumbers,i.value=!0}),u.value?700:1200)}));const c=()=>{i.value=!1},g=e=>e.isError?"bg-error text-error-content":e.isCorrect?"bg-success text-success-content border border-success-content":e.isRevealed&&e.hasNumber||e.hasNumber?"bg-primary text-primary-content":"",d=e=>e.hasNumber?"border cursor-pointer shadow-md":"border",b=e=>e.isError?"animate__animated animate__headShake":e.isCorrect?"animate__animated animate__flip animate__faster":"";return(e,o)=>((0,n.uX)(),(0,n.CE)("div",oe,[(0,n.Lk)("div",ie,[(0,n.Lk)("div",{class:"grid gap-2 m-0 p-0",style:(0,r.Tr)({gridTemplateColumns:"repeat("+(0,l.R1)(t).state.settings.gridNumCols+", "+s.value+"px)"})},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,l.R1)(t).state.game.grid,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,onTouchstart:(0,a.D$)((t=>m(e,t)),["prevent","stop"]),onMousedown:(0,a.D$)((t=>m(e,t)),["prevent","stop"]),class:(0,r.C4)(["flex items-center justify-center text-5xl font-bold rounded select-none",[g(e),b(e),d(e)]]),style:(0,r.Tr)({width:s.value+"px",height:s.value+"px"})},[e.isRevealed&&e.hasNumber?((0,n.uX)(),(0,n.CE)("span",me,(0,r.v_)(e.number),1)):(0,n.Q3)("",!0)],46,ue)))),128))],4),(0,n.bF)(re,{open:i.value,win:u.value,onClose:c},null,8,["open","win"])])]))}};const ge=ce;var de=ge;const be={class:"flex flex-col items-stretch px-4 lg-px-16"},ve={class:"settings-page p-4"},pe={class:"form-control mb-4"},fe={class:"label"},he={class:"label-text"},ke={class:"font-bold"},ye=["value"],we={class:"form-control mb-4"},xe={class:"label cursor-pointer"},Ce=["checked"],Ne={class:"form-control mb-4"},Le={class:"label cursor-pointer"},Ge=["checked"],_e={class:"form-control mb-4"},Ee=["value"],Re=["value"],Pe={class:"form-control mb-4"},Se=["value"],Oe=["value"];var Ie={__name:"Settings",setup(e){const t=(0,p.Pj)(),s=(0,o.rd)(),a=(e,s)=>{t.commit("changeSettings",{key:e,value:s})},i=()=>{s.push("game")};return(e,s)=>((0,n.uX)(),(0,n.CE)("div",be,[(0,n.Lk)("div",ve,[(0,n.Lk)("div",pe,[(0,n.Lk)("label",fe,[(0,n.Lk)("span",he,[s[5]||(s[5]=(0,n.eW)("Difficulty (amount of numbers): ")),(0,n.Lk)("span",ke,(0,r.v_)((0,l.R1)(t).state.settings.numNumbers),1)])]),(0,n.Lk)("input",{type:"range",min:"3",max:"20",value:(0,l.R1)(t).state.settings.numNumbers,onInput:s[0]||(s[0]=e=>a("numNumbers",parseInt(e.target.value))),class:"range range-primary"},null,40,ye),s[6]||(s[6]=(0,n.Lk)("div",{class:"w-full flex justify-between text-xs px-2"},[(0,n.Lk)("span",null,"3"),(0,n.Lk)("span",null,"12"),(0,n.Lk)("span",null,"20")],-1))]),(0,n.Lk)("div",we,[(0,n.Lk)("label",xe,[s[7]||(s[7]=(0,n.Lk)("span",{class:"label-text"},"Fixed difficulty",-1)),(0,n.Lk)("input",{type:"checkbox",checked:(0,l.R1)(t).state.settings.fixedDifficulty,onChange:s[1]||(s[1]=e=>a("fixedDifficulty",e.target.checked)),class:"toggle toggle-primary"},null,40,Ce)])]),(0,n.Lk)("div",Ne,[(0,n.Lk)("label",Le,[s[8]||(s[8]=(0,n.Lk)("span",{class:"label-text"},"Show GIF on win",-1)),(0,n.Lk)("input",{type:"checkbox",checked:(0,l.R1)(t).state.settings.showGifPictures,onChange:s[2]||(s[2]=e=>a("showGifPictures",e.target.checked)),class:"toggle toggle-primary"},null,40,Ge)])]),(0,n.Lk)("div",_e,[s[10]||(s[10]=(0,n.Lk)("label",{class:"label"},[(0,n.Lk)("span",{class:"label-text"},"Number of Games")],-1)),(0,n.Lk)("select",{value:(0,l.R1)(t).state.settings.numGames,onChange:s[3]||(s[3]=e=>a("numGames",parseInt(e.target.value))),class:"select select-bordered w-full"},[s[9]||(s[9]=(0,n.Lk)("option",{value:0},"Unlimited",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)([1,3,5,7,10],(e=>(0,n.Lk)("option",{key:e,value:e},(0,r.v_)(e),9,Re))),64))],40,Ee)]),(0,n.Lk)("div",Pe,[s[12]||(s[12]=(0,n.Lk)("label",{class:"label"},[(0,n.Lk)("span",{class:"label-text"},"Penalty for loosing")],-1)),(0,n.Lk)("select",{value:(0,l.R1)(t).state.settings.loosePenaltySec,onChange:s[4]||(s[4]=e=>a("loosePenaltySec",parseInt(e.target.value))),class:"select select-bordered w-full"},[s[11]||(s[11]=(0,n.Lk)("option",{value:0},"No penalty",-1)),((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)([3,5,7,10,15],(e=>(0,n.Lk)("option",{key:e,value:e},(0,r.v_)(e)+" seconds waiting ",9,Oe))),64))],40,Se)]),(0,n.Lk)("div",{class:"flex justify-end mt-6"},[(0,n.Lk)("button",{class:"btn btn-lg btn-primary",onClick:i},s[13]||(s[13]=[(0,n.eW)(" Start "),(0,n.Lk)("i",{class:"bi bi-play-fill mr-2"},null,-1)]))])])]))}};const Me=Ie;var Xe=Me;const je=[{path:"/",name:"home",component:$},{path:"/game",name:"game",component:de},{path:"/settings",name:"settings",component:Xe}],De=(0,o.aE)({history:(0,o.Bt)(),routes:je});var Ke=De;(0,a.Ef)(j).use(Ke).use(_).mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,l){if(!a){var r=1/0;for(m=0;m<e.length;m++){a=e[m][0],n=e[m][1],l=e[m][2];for(var o=!0,i=0;i<a.length;i++)(!1&l||r>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(o=!1,l<r&&(r=l));if(o){e.splice(m--,1);var u=n();void 0!==u&&(t=u)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[a,n,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,l,r=a[0],o=a[1],i=a[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(i)var m=i(s)}for(t&&t(a);u<r.length;u++)l=r[u],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(m)},a=self["webpackChunkMonkeyMemory2"]=self["webpackChunkMonkeyMemory2"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(371)}));a=s.O(a)})();
//# sourceMappingURL=app.2beafb02.js.map